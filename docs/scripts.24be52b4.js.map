{"version":3,"sources":["modules/requests.js","modules/date-time.js","modules/DOM.js","modules/ui.js","modules/data.js","modules/rendering.js","modules/events.js","scripts.js"],"names":["endpoint","request","fetch","returnDate","date","_Date","Date","isNaN","toLocaleDateString","main","document","querySelector","responsive","totalCases","totalDeaths","searchInput","getElementById","returnMortalityRate","deaths","confirmed","percentage","Math","round","statisticsUI","stats","innerHTML","map","index","country","statisticsMain","join","statistic","statisticsResponsive","lastUpdate","statistics","setStatistics","data","renderStatistics","innerText","reduce","total","stat","length","container","handleSearch","event","results","filter","toLowerCase","includes","target","value","addEventListener","then","response","json","features","Error","attributes","Last_Update","Confirmed","recovered","Recovered","Deaths","active","Active","Country_Region","group","currentCountry","existingGroup","find","catch","error","console","message"],"mappings":"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","file":"scripts.24be52b4.js","sourceRoot":"..","sourcesContent":["const endpoint =\n  \"https://services1.arcgis.com/0MSEUqKaxRlEPj5g/arcgis/rest/services/ncov_cases/FeatureServer/1/query?f=json&where=(Confirmed%20%3E%200)&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&orderByFields=Confirmed%20desc%2CCountry_Region%20asc%2CProvince_State%20asc&outSR=102100\";\n\nexport const request = fetch(endpoint);\n","export const returnDate = date => {\n  const _Date = new Date(date);\n\n  if (isNaN(_Date)) return;\n\n  return _Date.toLocaleDateString(\"en-us\");\n};\n","export const main = document.querySelector(\".root-main\");\nexport const responsive = document.querySelector(\".root-responsive\");\nexport const totalCases = document.querySelector(\".total-cases\");\nexport const totalDeaths = document.querySelector(\".total-deaths\");\nexport const searchInput = document.getElementById(\"query\");\n","import { returnDate } from \"./date-time\";\nimport { main, responsive } from \"./DOM\";\n\nconst returnMortalityRate = (deaths, confirmed) => {\n  const percentage = Math.round((deaths * 100) / confirmed);\n\n  return percentage < 1 ? \"&lt; 1%\" : `${percentage}%`;\n};\n\nexport const statisticsUI = stats => {\n  main.innerHTML = stats\n    .map(({ country }, index) => statisticsMain(country, index))\n    .join(\"\");\n  responsive.innerHTML = stats\n    .map((statistic, index) => statisticsResponsive(statistic, index))\n    .join(\"\");\n};\n\nconst statisticsMain = (country, index) =>\n  ` <tr>\n      <td>${country}</td>\n    </tr>\n  `;\n\nconst statisticsResponsive = ({ lastUpdate, confirmed, deaths }, index) =>\n  ` <tr>\n      <td  colspan=\"2\" class=\"color--orange text--center text--strong\">${confirmed}</td>\n      <td  colspan=\"2\" class=\"color--red text--center text--strong\">${deaths}</td>\n      <td class=\"text--center\">\n          ${deaths ? returnMortalityRate(deaths, confirmed) : `N/A`}\n      </td>\n      <td class=\"text--right text--small\">${returnDate(lastUpdate)}</td>\n    </tr>\n  `;\n","export let statistics = [];\n\nexport const setStatistics = data => {\n  statistics = [...data];\n};\n","import { statisticsUI } from \"./ui\";\nimport { totalCases, totalDeaths, main, responsive } from \"./DOM\";\nimport { statistics } from \"./data\";\n\nexport const renderStatistics = stats => {\n  totalDeaths.innerText = [...statistics].reduce(\n    (total, stat) => total + stat.deaths,\n    0\n  );\n\n  totalCases.innerText = [...statistics].reduce(\n    (total, stat) => total + stat.confirmed,\n    0\n  );\n\n  if (stats.length < 1) {\n    container.innerHTML = `<tr><td colspan=\"5\"><p>Sorry, no results for that search. Please adjust your query.<p></td></tr>`;\n  } else {\n    statisticsUI(stats);\n  }\n};\n","import { searchInput } from \"./DOM\";\nimport { statistics, setStatistics } from \"./data\";\nimport { renderStatistics } from \"./rendering\";\n\nfunction handleSearch(event) {\n  const results = statistics.filter(({ country }) => {\n    return country.toLowerCase().includes(event.target.value.toLowerCase());\n  });\n\n  renderStatistics(results);\n}\n\nsearchInput.addEventListener(\"keyup\", handleSearch, true);\n","import { request } from \"./modules/requests\";\nimport { renderStatistics } from \"./modules/rendering\";\nimport { setStatistics } from \"./modules/data\";\nimport \"./modules/events\";\n\n{\n  request\n    .then(response => response.json())\n    .then(({ features }) => {\n      if (!features) {\n        throw Error(\"No data\");\n      }\n\n      const statistics = features\n        .map(\n          ({\n            attributes: {\n              Last_Update: lastUpdate,\n              Confirmed: confirmed,\n              Recovered: recovered,\n              Deaths: deaths,\n              Active: active,\n              Country_Region: country\n            }\n          }) => ({ lastUpdate, confirmed, recovered, deaths, active, country })\n        )\n        .filter(({ confirmed }) => confirmed)\n        .reduce((statistics, group) => {\n          const { country: currentCountry } = group;\n\n          const existingGroup = statistics.find(\n            ({ country }) => country === currentCountry\n          );\n\n          if (existingGroup) {\n            existingGroup.confirmed += group.confirmed;\n            existingGroup.deaths += group.deaths;\n            existingGroup.recovered += group.recovered;\n          }\n\n          return existingGroup ? [...statistics] : [...statistics, group];\n        }, []);\n\n      setStatistics(statistics);\n\n      return statistics;\n    })\n    .then(statistics => renderStatistics(statistics))\n    .catch(error => console.error(error.message));\n}\n"]}